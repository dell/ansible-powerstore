.. _replicationrule_module:


replicationrule -- Replication rule operations on a PowerStore storage system
=============================================================================

.. contents::
   :local:
   :depth: 1


Synopsis
--------

Performs all replication rule operations on a PowerStore Storage System.

This module supports get details of an existing replication rule, create new replication rule for supported parameters, modify replication rule and delete a specific replication rule.



Requirements
------------
The below requirements are needed on the host that executes this module.

- A Dell PowerStore storage system version 3.0.0.0 or later.
- Ansible-core 2.14 or later.
- PyPowerStore 3.1.0.
- Python 3.9, 3.10 or 3.11.



Parameters
----------

  replication_rule_name (optional, str, None)
    Name of the replication rule.

    Required during creation of a replication rule.

    Parameter *replication_rule_name* and *replication_rule_id* are mutually exclusive.


  replication_rule_id (optional, str, None)
    ID of the replication rule.

    ID for the rule is autogenerated, cannot be passed during creation of a replication rule.

    Parameter *replication_rule_name* and *replication_rule_id* are mutually exclusive.


  new_name (optional, str, None)
    New name of the replication rule.

    Used for renaming a replication rule.


  rpo (False, str, None)
    Recovery point objective (RPO), which is the acceptable amount of data, measured in units of time, that may be lost in case of a failure.


  alert_threshold (False, int, None)
    Acceptable delay between the expected and actual replication sync intervals. The system generates an alert if the delay between the expected and actual sync exceeds this threshold.

    During creation, if not passed, then by default one RPO in minutes will be passed.

    The range of integers supported are in between 0 and 1440 (inclusive of both).


  remote_system (False, str, None)
    ID or name of the remote system to which this rule will replicate the associated resources.


  remote_system_address (False, str, None)
    The management IPv4 address of the remote system.

    It is required in case the remote system name passed in *remote_system* parameter is not unique on the PowerStore Array.

    If ID of the remote system is passed then no need to pass *remote_system_address*.


  state (True, str, None)
    The state of the replication rule after the task is performed.

    For Delete operation only, it should be set to ``absent``.

    For all Create, Modify or Get details operations it should be set to ``present``.


  array_ip (True, str, None)
    IP or FQDN of the PowerStore management system.


  validate_certs (optional, bool, True)
    Boolean variable to specify whether to validate SSL certificate or not.

    ``true`` - indicates that the SSL certificate should be verified. Set the environment variable REQUESTS_CA_BUNDLE to the path of the SSL certificate.

    ``false`` - indicates that the SSL certificate should not be verified.


  user (True, str, None)
    The username of the PowerStore host.


  password (True, str, None)
    The password of the PowerStore host.


  timeout (optional, int, 120)
    Time after which the connection will get terminated.

    It is to be mentioned in seconds.


  port (optional, int, None)
    Port number for the PowerStore array.

    If not passed, it will take 443 as default.





Notes
-----

.. note::
   - The *check_mode* is not supported.
   - The modules present in this collection named as 'dellemc.powerstore' are built to support the Dell PowerStore storage platform.




Examples
--------

.. code-block:: yaml+jinja

    

    - name: Create new replication rule
      dellemc.powerstore.replicationrule:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        replication_rule_name: "sample_replication_rule"
        rpo: "Five_Minutes"
        alert_threshold: "15"
        remote_system: "WN-D8877"
        state: "present"

    - name: Modify existing replication rule
      dellemc.powerstore.replicationrule:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        replication_rule_name: "sample_replication_rule"
        new_name: "new_sample_replication_rule"
        rpo: "One_Hour"
        alert_threshold: "60"
        remote_system: "WN-D0517"
        state: "present"

    - name: Get details of replication rule
      dellemc.powerstore.replicationrule:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        replication_rule_id: "{{id}}"
        state: "present"

    - name: Delete an existing replication rule
      dellemc.powerstore.replicationrule:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        replication_rule_name: "new_sample_replication_rule"
        state: "absent"



Return Values
-------------

changed (always, bool, false)
  Whether or not the resource has changed.


replication_rule_details (When replication rule exists, complex, {'alert_threshold': 15, 'id': '0a9dc368-3085-4f4b-b7a4-23ec0166542f', 'is_replica': False, 'name': 'sample_replication_rule', 'policies': [], 'remote_system_id': '677f64ff-955a-49ce-9a06-7d5af0ec4929', 'remote_system_name': 'RT-D0101', 'rpo': 'Thirty_Minutes'})
  Details of the replication rule.


  id (, str, )
    The system generated ID of the replication rule.


  name (, str, )
    Name of the replication rule.


  alert_threshold (, int, )
    Acceptable delay in minutes between the expected and actual replication sync intervals.


  rpo (, str, )
    Recovery point objective (RPO), which is the acceptable amount of data, measured in units of time, that may be lost in case of a failure.


  remote_system_id (, str, )
    Unique identifier of the remote system to which this rule will replicate the associated resources.


  remote_system_name (, str, )
    Name of the remote system to which this rule will replicate the associated resources.






Status
------





Authors
~~~~~~~

- P Srinivas Rao (@srinivas-rao5) <ansible.team@dell.com>


.. _remotesystem_module:


remotesystem -- Remote system operations on a PowerStore storage system
=======================================================================

.. contents::
   :local:
   :depth: 1


Synopsis
--------

Performs all remote system operations on a PowerStore Storage System.

This module supports get details of a remote systems, create/Add new remote system for all supported parameters, modify remote system with supported parameters and delete/remove a remote system.



Requirements
------------
The below requirements are needed on the host that executes this module.

- A Dell PowerStore storage system version 3.0.0.0 or later.
- Ansible-core 2.13 or later.
- PyPowerStore 3.2.0.
- Python 3.9, 3.10 or 3.11.



Parameters
----------

  remote_name (optional, str, None)
    Name of the remote system.

    Parameter *remote_name* cannot be mentioned during addition of a new remote system.


  remote_id (optional, str, None)
    ID of the remote system.

    ID for the remote system is autogenerated, cannot be passed during creation of a remote system.

    Parameter *remote_id* and *remote_address* are mutually exclusive.


  remote_user (optional, str, None)
    Username used in basic authentication to remote PowerStore cluster.

    It can be mentioned only during creation of the remote system.


  remote_password (optional, str, None)
    Password used in basic authentication to remote PowerStore cluster.

    It can be mentioned only during creation of the remote system.


  remote_address (optional, str, None)
    Management IP of the remote system.

    Parameter *remote_id* and *remote_address* are mutually exclusive.


  new_remote_address (optional, str, None)
    New management IP of the remote system.


  remote_port (optional, int, 443)
    Remote system's port number.

    It can be mentioned only during creation of the remote system.


  description (optional, str, None)
    Additional information about the remote system.

    To remove the description empty string is to be passed.


  network_latency (optional, str, None)
    Replication traffic can be tuned for higher efficiency depending on the expected network latency.

    Setting to low will have latency of less than five milliseconds.

    Setting to high will have latency of more than five milliseconds.


  wait_for_completion (optional, bool, False)
    Flag to indicate if the operation should be run synchronously or asynchronously.

    ``true`` signifies synchronous execution.

    By default, modify and delete operation will run asynchronously.


  state (True, str, None)
    The state of the remote system after the task is performed.

    For Delete operation only, it should be set to ``absent``.

    For all Create, Modify or Get details operations it should be set to ``present``.


  array_ip (True, str, None)
    IP or FQDN of the PowerStore management system.


  validate_certs (optional, bool, True)
    Boolean variable to specify whether to validate SSL certificate or not.

    ``true`` - indicates that the SSL certificate should be verified. Set the environment variable REQUESTS_CA_BUNDLE to the path of the SSL certificate.

    ``false`` - indicates that the SSL certificate should not be verified.


  user (True, str, None)
    The username of the PowerStore host.


  password (True, str, None)
    The password of the PowerStore host.


  timeout (optional, int, 120)
    Time after which the connection will get terminated.

    It is to be mentioned in seconds.


  port (optional, int, None)
    Port number for the PowerStore array.

    If not passed, it will take 443 as default.





Notes
-----

.. note::
   - The module support allows create/delete/update only for remote PowerStore arrays.
   - Get details can be done for all type of remote arrays.
   - Parameters *remote_user*, *remote_port* and *remote_password* are not required during modification, getting and deleting. If passed then these parameters will be ignored and the operation will be performed.
   - If *wait_for_completion* is set to ``true`` then the connection will be terminated after the timeout is exceeded. User can tweak timeout and pass it in the playbook task.
   - By default, the timeout is set to 120 seconds.
   - The *check_mode* is not supported.
   - The modules present in this collection named as 'dellemc.powerstore' are built to support the Dell PowerStore storage platform.




Examples
--------

.. code-block:: yaml+jinja

    

    - name: Add a new remote system
      dellemc.powerstore.remotesystem:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        remote_address: "xxx.xxx.xxx.xxx"
        remote_user: "admin"
        remote_password: "{{remote_password}}"
        remote_port: 443
        network_latency: "Low"
        decription: "Adding a new remote system"
        state: "present"

    - name: Modify attributes of remote system using remote_id
      dellemc.powerstore.remotesystem:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        remote_id: "7d7e7917-735b-3eef-8cc3-1302001c08e7"
        remote_address: "xxx.xxx.xxx.xxx"
        network_latency: "Low"
        wait_for_completion: true
        timeout: 300
        decription: "Updating the description"
        state: "present"

    - name: Get details of remote system using remote_id
      dellemc.powerstore.remotesystem:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        remote_id: "D7d7e7917-735b-3eef-8cc3-1302001c08e7"
        state: "present"

    - name: Delete remote system using remote_id
      dellemc.powerstore.remotesystem:
        array_ip: "{{array_ip}}"
        validate_certs: "{{validate_certs}}"
        user: "{{user}}"
        password: "{{password}}"
        remote_id: "D7d7e7917-735b-3eef-8cc3-1302001c08e7"
        state: "absent"



Return Values
-------------

changed (always, bool, false)
  Whether or not the resource has changed.


job_details (When wait_for_completion is not set to True., complex, {'description_l10n': 'Modify network parameters.', 'end_time': '2022-01-06T07:39:05.846+00:00', 'estimated_completion_time': None, 'id': 'be0d099c-a6cf-44e8-88d7-9be80ccae369', 'parent_id': None, 'phase': 'Completed', 'phase_l10n': 'Completed', 'progress_percentage': 100, 'resource_action': 'modify', 'resource_action_l10n': 'modify', 'resource_id': 'nw6', 'resource_name': None, 'resource_type': 'network', 'resource_type_l10n': 'network', 'response_body': None, 'response_status': None, 'response_status_l10n': None, 'root_id': 'be0d099c-a6cf-44e8-88d7-9be80ccae369', 'start_time': '2022-01-06T07:39:05.47+00:00', 'state': 'COMPLETED', 'state_l10n': 'Completed', 'step_order': 23792565, 'user': 'admin'})
  Details of the job.


  id (, str, )
    The id of the job.



remote_system_details (When remote system exists, complex, {'data_connection_state': 'Initializing', 'data_connection_state_l10n': 'Initializing', 'data_connections': None, 'data_network_latency': 'Low', 'data_network_latency_l10n': 'Low', 'description': 'Adding remote system', 'discovery_chap_mode': 'Disabled', 'discovery_chap_mode_l10n': 'Disabled', 'id': 'aaa3cc6b-455b-4bde-aa75-a1edf61bbe0b', 'import_sessions': [], 'iscsi_addresses': ['xx.xx.xx.xx', 'xx.xx.xx.xx'], 'management_address': 'xx.xx.xx.xx', 'name': 'RT-D0100', 'replication_sessions': [], 'serial_number': 'PSeba1a5c63d46', 'session_chap_mode': 'Disabled', 'session_chap_mode_l10n': 'Disabled', 'state': 'Ok', 'state_l10n': 'Ok', 'type': 'PowerStore', 'type_l10n': 'PowerStore', 'user_name': ''})
  Details of the remote system.


  id (, str, )
    The system generated ID of the remote system.


  name (, str, )
    Name of the remote system.


  management_address (, str, )
    The management cluster IP address of the remote system.


  description (, str, )
    User-specified description of the remote system instance.


  serial_number (, str, )
    Serial number of the remote system instance.


  version (, str, )
    Version of the remote system.

    It was added in PowerStore version 2.0.0.0.


  type (, str, )
    Remote system connection type between the local system.


  user_name (, str, )
    Username used to access the non-PowerStore remote systems.


  state (, str, )
    Possible remote system states.

    OK, Normal conditions.

    Update_Needed, Verify and update needed to handle network configuration changes on the systems.

    Management_Connection_Lost, Management connection to the remote peer is lost.


  data_connection_state (, str, )
    Data connection states of a remote system.


  discovery_chap_mode (, str, )
    Challenge Handshake Authentication Protocol (CHAP) statu.


  session_chap_mode (, str, )
    Challenge Handshake Authentication Protocol (CHAP) status.


  data_network_latency (, str, )
    Network latency choices for a remote system. Replication traffic can be tuned for higher efficiency depending on the expected network latency.

    This will only be used when the remote system type is PowerStore.


  data_connections (, complex, )
    List of data connections from each appliance in the local cluster to iSCSI target IP address.


    node_id (, str, )
      Unique identifier of the local, initiating node.


    initiator_address (, str, )
      Initiating address from the local node.


    status (, str, )
      Possible transit connection statuses.


    target_address (, str, )
      Target address from the remote system.







Status
------





Authors
~~~~~~~

- P Srinivas Rao (@srinivas-rao5) <ansible.team@dell.com>

